generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlserver"
  url      = env("DATABASE_URL")
}

model Role {
  id    Int    @id @default(autoincrement())
  name  String @unique
  users User[]
}

model User {
  UID       Int     @id @default(autoincrement())
  email     String  @unique
  firstName String
  lastName  String
  roleName  String
  password  String
  Asset     Asset[]
  role      Role    @relation(fields: [roleName], references: [name])
  iv        Bytes   @default("")
}

model AssetType {
  id            Int         @id @default(autoincrement()) 
  type          String      @unique @db.VarChar(255) 
  assets        Asset[]
}

model Location {
  id            Int         @id @default(autoincrement()) 
  location      String      @unique @db.VarChar(255)
  assets        Asset[]
}

model Asset { 
  id                        Int           @id @default(autoincrement()) 
  name                      String        @db.VarChar(255) 
  assetType                 AssetType     @relation(fields: [type], references: [type])
  type                      String        @db.VarChar(255) 
  make                      String?       @db.VarChar(255) 
  model                     String?       @db.VarChar(255) 
  assetTag                  String        @db.Char(6) 
  serialNumber              String?       @db.VarChar(255) 
  description               String?       @db.Text 
  custodian                 Int           
  custodianID               User          @relation(fields: [custodian], references: [UID])
  locationType              Location      @relation(fields: [location], references: [location])
  location                  String        @db.VarChar(255)
  warrantyStartDate         DateTime?      
  warrantyEndDate           DateTime?
  warrantyDetails           String?       @db.Text
  dateOfPurchase            DateTime?
  cost                      Decimal?      @db.Decimal(10,2)
  purchaser                 String?       @db.VarChar(255)
  comment                   String?       @db.Text
} 